
<!doctype html>
<html lang="zh" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="icon" href="../assets/favicon.ico">
      <meta name="generator" content="mkdocs-1.2.3, mkdocs-material-8.1.7">
    
    
      
        <title>åŸºäºæœºå™¨å­¦ä¹ çš„æ¶æ„URLæ£€æµ‹ - AI for Security</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.cd566b2a.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.e6a45f82.min.css">
        
          
          
          <meta name="theme-color" content="#ffffff">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="white" data-md-color-accent="red">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#url" class="md-skip">
          è·³è½¬è‡³
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="é¡µçœ‰">
    <a href=".." title="AI for Security" class="md-header__button md-logo" aria-label="AI for Security" data-md-component="logo">
      
  <img src="../assets/logo_white.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            AI for Security
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              åŸºäºæœºå™¨å­¦ä¹ çš„æ¶æ„URLæ£€æµ‹
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="æœç´¢" placeholder="æœç´¢" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="æŸ¥æ‰¾">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="æ¸…ç©ºå½“å‰å†…å®¹" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            æ­£åœ¨åˆå§‹åŒ–æœç´¢å¼•æ“
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="å¯¼èˆªæ " data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="AI for Security" class="md-nav__button md-logo" aria-label="AI for Security" data-md-component="logo">
      
  <img src="../assets/logo_white.png" alt="logo">

    </a>
    AI for Security
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        Index
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../0x0_%E7%9B%B8%E5%85%B3%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/" class="md-nav__link">
        ç›¸å…³åŸºç¡€çŸ¥è¯†
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../0x1_%E5%9F%BA%E4%BA%8Ekmeans%E7%9A%84%E7%BD%91%E7%BB%9C%E5%BC%82%E5%B8%B8%E6%A3%80%E6%B5%8B/" class="md-nav__link">
        åŸºäºk-meansçš„ç½‘ç»œå¼‚å¸¸é€šè®¯æ£€æµ‹
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../0x2_%E5%9F%BA%E4%BA%8E%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E7%9A%84DGA%E6%A3%80%E6%B5%8B/" class="md-nav__link">
        åŸºäºæ·±åº¦å­¦ä¹ çš„DGAæ£€æµ‹
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          åŸºäºæœºå™¨å­¦ä¹ çš„æ¶æ„URLæ£€æµ‹
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        åŸºäºæœºå™¨å­¦ä¹ çš„æ¶æ„URLæ£€æµ‹
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="ç›®å½•">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      ç›®å½•
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    ç›®å½•
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    æ¦‚è¿°
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    æå‡ºé—®é¢˜
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    æ•°æ®å¤„ç†
  </a>
  
    <nav class="md-nav" aria-label="æ•°æ®å¤„ç†">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    æ ·æœ¬é€‰æ‹©
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    æ•°æ®æ¸…æ´—
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    ç‰¹å¾æå–
  </a>
  
    <nav class="md-nav" aria-label="ç‰¹å¾æå–">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#tf-idf" class="md-nav__link">
    æ³¨ï¼šTF-IDF
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    æ¨¡å‹é€‰æ‹©
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    æ•ˆæœè¯„ä¼°
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_10" class="md-nav__link">
    å®Œæ•´ä»£ç 
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_11" class="md-nav__link">
    æ¦‚å¿µè¡¥å……
  </a>
  
    <nav class="md-nav" aria-label="æ¦‚å¿µè¡¥å……">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_12" class="md-nav__link">
    é€»è¾‘å›å½’
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#svm" class="md-nav__link">
    æ”¯æŒå‘é‡æœºï¼ˆSVMï¼‰
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#reference" class="md-nav__link">
    Reference
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="ç›®å½•">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      ç›®å½•
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    ç›®å½•
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    æ¦‚è¿°
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    æå‡ºé—®é¢˜
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    æ•°æ®å¤„ç†
  </a>
  
    <nav class="md-nav" aria-label="æ•°æ®å¤„ç†">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    æ ·æœ¬é€‰æ‹©
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    æ•°æ®æ¸…æ´—
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    ç‰¹å¾æå–
  </a>
  
    <nav class="md-nav" aria-label="ç‰¹å¾æå–">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#tf-idf" class="md-nav__link">
    æ³¨ï¼šTF-IDF
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    æ¨¡å‹é€‰æ‹©
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    æ•ˆæœè¯„ä¼°
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_10" class="md-nav__link">
    å®Œæ•´ä»£ç 
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_11" class="md-nav__link">
    æ¦‚å¿µè¡¥å……
  </a>
  
    <nav class="md-nav" aria-label="æ¦‚å¿µè¡¥å……">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_12" class="md-nav__link">
    é€»è¾‘å›å½’
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#svm" class="md-nav__link">
    æ”¯æŒå‘é‡æœºï¼ˆSVMï¼‰
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#reference" class="md-nav__link">
    Reference
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                

<h1 id="url">åŸºäºæœºå™¨å­¦ä¹ çš„æ¶æ„URLæ£€æµ‹</h1>
<h2 id="_1">ç›®å½•</h2>
<div class="toc">
<ul>
<li><a href="#url">åŸºäºæœºå™¨å­¦ä¹ çš„æ¶æ„URLæ£€æµ‹</a><ul>
<li><a href="#_1">ç›®å½•</a></li>
<li><a href="#_2">æ¦‚è¿°</a></li>
<li><a href="#_3">æå‡ºé—®é¢˜</a></li>
<li><a href="#_4">æ•°æ®å¤„ç†</a><ul>
<li><a href="#_5">æ ·æœ¬é€‰æ‹©</a></li>
<li><a href="#_6">æ•°æ®æ¸…æ´—</a></li>
</ul>
</li>
<li><a href="#_7">ç‰¹å¾æå–</a><ul>
<li><a href="#tf-idf">æ³¨ï¼šTF-IDF</a></li>
</ul>
</li>
<li><a href="#_8">æ¨¡å‹é€‰æ‹©</a></li>
<li><a href="#_9">æ•ˆæœè¯„ä¼°</a></li>
<li><a href="#_10">å®Œæ•´ä»£ç </a></li>
<li><a href="#_11">æ¦‚å¿µè¡¥å……</a><ul>
<li><a href="#_12">é€»è¾‘å›å½’</a></li>
<li><a href="#svm">æ”¯æŒå‘é‡æœºï¼ˆSVMï¼‰</a></li>
</ul>
</li>
<li><a href="#reference">Reference</a></li>
</ul>
</li>
</ul>
</div>
<h2 id="_2">æ¦‚è¿°</h2>
<p>æœ¬æ¬¡å®è·µè™½é¢˜ä¸ºâ€åŸºäºæœºå™¨å­¦ä¹ â€œï¼Œä½†ç›®å‰ä¹Ÿåªæ›´æ–°åˆ°ä½¿ç”¨TF-IDFå’Œçº¿æ€§å›å½’æ¨¡å‹çš„è¿›åº¦ã€‚ä¸è¿‡åƒé‡Œä¹‹è¡Œå§‹äºè¶³ä¸‹å˜›ï¼Œåé¢å†æ›´å•¦ğŸ¦</p>
<h2 id="_3">æå‡ºé—®é¢˜</h2>
<p>é¦–å…ˆæˆ‘ä»¬éœ€è¦å°†å®‰å…¨é—®é¢˜è¿›è¡ŒæŠ½è±¡ï¼Œä¹Ÿå°±æ˜¯é’ˆå¯¹ç°çŠ¶æå‡ºé—®é¢˜ã€‚åœ¨å‡å®šçš„è¿™ä¸ªä¸šåŠ¡èƒŒæ™¯ä¸‹ï¼Œæˆ‘ä»¬å‘ç°ï¼š</p>
<ul>
<li>
<p>æ¶æ„URLå­˜åœ¨ç‰¹å®šå‡ ç§ç±»å‹1</p>
</li>
<li>
<p>ç‰¹å®šç±»å‹æ¶æ„URLåœ¨æ–‡æœ¬ä¸Šå­˜åœ¨æ™®éçš„<strong>è¯æ±‡ç‰¹å¾</strong>ï¼Œä¾‹å¦‚é’“é±¼URLä¸­å¸¸è§"login", "account", "sigin"ç­‰å…³é”®è¯</p>
</li>
</ul>
<p>å› æ­¤æˆ‘ä»¬å°è¯•ä½¿ç”¨æœºå™¨å­¦ä¹ ç®—æ³•å¯¹æ¶æ„URLè¿›è¡Œæ£€æµ‹åˆ†æã€‚</p>
<h2 id="_4">æ•°æ®å¤„ç†</h2>
<h3 id="_5">æ ·æœ¬é€‰æ‹©</h3>
<ul>
<li><a href="https://github.com/faizann24/Using-machine-learning-to-detect-malicious-URLs">malicious-URLs</a><ul>
<li><strong>malicious-URLs</strong> åœ¨Githubä¸Šé¢ä¸€ä¸ª ä½¿ç”¨æœºå™¨å­¦ä¹ å»æ£€æµ‹æ¶æ„URLçš„é¡¹ç›® ï¼Œé‡Œé¢æœ‰ä¸€ä¸ªè®­ç»ƒé›†ï¼Œæœ‰åšæ ‡è®°æ˜¯æ­£å¸¸çš„URLè¿˜æ˜¯æ¶æ„çš„URL</li>
<li>å†…å®¹ç±»å‹ï¼šæ–‡æœ¬æ ·æœ¬</li>
<li>æ˜¯å¦æ ‡è®°ï¼šæ˜¯</li>
<li>æ˜¯å¦ç‰¹å¾åŒ–ï¼šå¦</li>
<li>ä½¿ç”¨èŒƒå›´ï¼šå…¥ä¾µæ£€æµ‹ã€å¼‚å¸¸æµé‡ã€WAF</li>
</ul>
</li>
</ul>
<h3 id="_6">æ•°æ®æ¸…æ´—</h3>
<p>ç”±äºæ ·æœ¬æœ¬èº«ä¸ºå¤„ç†å¥½çš„æ ‡è®°æ•°æ®ï¼Œæ‰€ä»¥åœ¨æ•°æ®æ ¼å¼å’Œè„æ•°æ®ä¸Šæ— éœ€å¤„ç†ï¼ˆçœŸå®æƒ…å†µä¸‹å¯èƒ½æ­£å¥½ç›¸å:-(ï¼‰ã€‚</p>
<p>ç¼–å†™æ•°æ®å¸§æå–å‡½æ•°ï¼š</p>
<div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">csv_data_read</span><span class="p">(</span><span class="n">csv_file_path</span><span class="p">):</span>
    <span class="c1"># ä¸ºå‡å°‘è®­ç»ƒæ—¶é—´ï¼Œå¯åªå–å¤´éƒ¨10Wæ¡ï¼Œä½†ä¸€å®šéœ€è¦å…ˆæ‰“ä¹±æ ·æœ¬ï¼‰</span>
    <span class="c1"># df_csv = pd.read_csv(csv_file_path).head(100000)</span>
    <span class="n">df_csv</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">csv_file_path</span><span class="p">)</span>
    <span class="n">urls</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">labels</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">df_csv</span><span class="o">.</span><span class="n">iterrows</span><span class="p">():</span>
        <span class="n">urls</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="s2">&quot;url&quot;</span><span class="p">])</span>
        <span class="n">labels</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="s2">&quot;label&quot;</span><span class="p">])</span>
    <span class="k">return</span> <span class="n">urls</span><span class="p">,</span> <span class="n">labels</span>
</code></pre></div>
<p>ç¼–å†™å¯¹URLçš„æ•°æ®æ¸…æ´—å‡½æ•°ï¼š
<div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">url_tokenize</span><span class="p">(</span><span class="n">url</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    å¯¹URLè¿›è¡Œæ¸…æ´—ï¼Œåˆ é™¤æ–œçº¿ã€ç‚¹ã€å’Œcomï¼Œè¿›è¡Œåˆ†è¯</span>
<span class="sd">    :param url:</span>
<span class="sd">    :return:</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">web_url</span> <span class="o">=</span> <span class="n">url</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
    <span class="n">dot_slash</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">slash</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">web_url</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">slash</span><span class="p">:</span>
        <span class="n">r1</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;-&#39;</span><span class="p">)</span>
        <span class="n">token_slash</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="nb">len</span><span class="p">(</span><span class="n">r1</span><span class="p">)):</span>
            <span class="n">r2</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">r1</span><span class="p">[</span><span class="n">j</span><span class="p">])</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">)</span>
            <span class="n">token_slash</span> <span class="o">=</span> <span class="n">token_slash</span> <span class="o">+</span> <span class="n">r2</span>
        <span class="n">dot_slash</span> <span class="o">=</span> <span class="n">dot_slash</span> <span class="o">+</span> <span class="n">r1</span> <span class="o">+</span> <span class="n">token_slash</span>
    <span class="n">urltoken_list</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">dot_slash</span><span class="p">))</span>
    <span class="n">white_words</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;com&quot;</span><span class="p">,</span> <span class="s2">&quot;http:&quot;</span><span class="p">,</span> <span class="s2">&quot;https:&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">]</span>
    <span class="k">for</span> <span class="n">white_word</span> <span class="ow">in</span> <span class="n">white_words</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">white_word</span> <span class="ow">in</span> <span class="n">urltoken_list</span><span class="p">:</span>
            <span class="n">urltoken_list</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">white_word</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">urltoken_list</span>
</code></pre></div></p>
<h2 id="_7">ç‰¹å¾æå–</h2>
<p>æˆ‘ä»¬é¦–å…ˆåŠ è½½æ•°æ®é›†ï¼š</p>
<div class="highlight"><pre><span></span><code>    <span class="n">grep_csv_file_path</span> <span class="o">=</span> <span class="s2">&quot;../../data/data-0x3/grey-url.csv&quot;</span>
    <span class="n">black_csv_file_path</span> <span class="o">=</span> <span class="s2">&quot;../../data/data-0x3/black-url.csv&quot;</span>
    <span class="n">grey_urls</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">csv_data_read</span><span class="p">(</span><span class="n">grep_csv_file_path</span><span class="p">)</span>
</code></pre></div>
<p>æˆ‘ä»¬ä½¿ç”¨TF-IDFç®—æ³•æå–URLçš„ç‰¹å¾ï¼Œå¹¶å°†æ•°æ®å¸§åˆ’åˆ†ä¸ºè®­ç»ƒé›†å’Œæµ‹è¯•é›†ï¼š</p>
<div class="highlight"><pre><span></span><code>    <span class="n">url_vectorizer</span> <span class="o">=</span> <span class="n">TfidfVectorizer</span><span class="p">(</span><span class="n">tokenizer</span><span class="o">=</span><span class="n">url_tokenize</span><span class="p">)</span>
    <span class="n">x</span> <span class="o">=</span> <span class="n">url_vectorizer</span><span class="o">.</span><span class="n">fit_transform</span><span class="p">(</span><span class="n">grey_urls</span><span class="p">)</span>
    <span class="n">x_train</span><span class="p">,</span> <span class="n">x_test</span><span class="p">,</span> <span class="n">y_train</span><span class="p">,</span> <span class="n">y_test</span> <span class="o">=</span> <span class="n">train_test_split</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">test_size</span><span class="o">=</span><span class="mf">0.2</span><span class="p">,</span> <span class="n">random_state</span><span class="o">=</span><span class="mi">42</span><span class="p">)</span>
</code></pre></div>
<h3 id="tf-idf">æ³¨ï¼šTF-IDF</h3>
<p>TF-IDF(Term Frequency â€“ Inverse Document Frequency)ï¼Œå³è¯é¢‘-é€†æ–‡æ¡£é¢‘ç‡ã€‚åœ¨è®¡ç®—ä¸Šä¸ºè¯é¢‘å’Œé€†æ–‡æ¡£é¢‘ç‡çš„ä¹˜ç§¯ã€‚è®¡ç®—æ–¹æ³•å¦‚ä¸‹ï¼š</p>
<ul>
<li>è®¡ç®—è¯é¢‘ï¼ˆTFï¼‰<ul>
<li>æŸä¸ªè¯åœ¨æ–‡ç« ä¸­å‡ºç°çš„æ¬¡æ•°/æ–‡ç« çš„æ€»è¯æ•°</li>
<li>å³æŸä¸ªè¯åœ¨è¿™æ®µæ–‡å­—ä¸­å‡ºç°å¾—è¶Šå¤šï¼ŒTFå°±è¶Šå¤§</li>
</ul>
</li>
<li>è®¡ç®—é€†æ–‡æ¡£é¢‘ç‡ï¼ˆIDFï¼‰<ul>
<li>log(è¯­æ–™åº“çš„æ–‡æ¡£æ€»æ•°/åŒ…å«è¯¥è¯çš„æ–‡æ¡£æ•°+1)</li>
<li>æŸä¸ªè¯åœ¨æ™®éæƒ…å†µä¸‹è¶Šå¸¸è§ï¼Œåˆ†æ¯å¤§ï¼ŒIDFä¹Ÿçº¦è¶‹äº0</li>
</ul>
</li>
<li>è®¡ç®—TF-IDF<ul>
<li>TF-IDF = TF * IDF</li>
<li>TF-IDFè¶Šå¤§ï¼Œè¯´æ˜è¯åœ¨è¿™æ®µæ–‡ç« ä¸­è¶Šé‡è¦ï¼Œä½†å› ä¸ºæœ‰IDFçš„å­˜åœ¨ï¼Œåˆèƒ½é¿å…æŠŠâ€œæ˜¯â€ã€â€çš„â€œã€â€œå’Œâ€ç­‰åœç”¨è¯çš„TF-IDFå€¼é™ä½</li>
</ul>
</li>
</ul>
<p>åœ¨åº”ç”¨ä¸Šï¼šå°†æ–‡ç« åˆ†è¯ï¼Œè®¡ç®—TF-IDFï¼ŒæŒ‰ç…§å…¶å€¼å¤§å°é™åºæ’åˆ—ï¼Œæ’åé å‰çš„å³æ–‡ç« çš„å…³é”®è¯</p>
<h2 id="_8">æ¨¡å‹é€‰æ‹©</h2>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å¯¹æ•°æ®é›†ä½¿ç”¨<strong>é€»è¾‘å›å½’æ¨¡å‹</strong>ï¼Œå¹¶å°†å°†æ‹Ÿåˆåçš„æ¨¡å‹å’Œå‘é‡ä¿å­˜ä¸ºæœ¬åœ°æ–‡ä»¶ï¼Œä¾¿äºé‡å¤ä½¿ç”¨</p>
<div class="highlight"><pre><span></span><code>    <span class="c1"># å¯¹è®­ç»ƒé›†å’Œæµ‹è¯•é›†æ‰§è¡Œé€»è¾‘å›å½’</span>
    <span class="n">l_regress</span> <span class="o">=</span> <span class="n">LogisticRegression</span><span class="p">(</span><span class="n">solver</span><span class="o">=</span><span class="s1">&#39;liblinear&#39;</span><span class="p">)</span>
    <span class="n">l_regress</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">x_train</span><span class="p">,</span> <span class="n">y_train</span><span class="p">)</span>
    <span class="n">l_score</span> <span class="o">=</span> <span class="n">l_regress</span><span class="o">.</span><span class="n">score</span><span class="p">(</span><span class="n">x_test</span><span class="p">,</span> <span class="n">y_test</span><span class="p">)</span>
    <span class="c1"># print(&quot;æµ‹è¯•æ‹Ÿåˆåˆ†æ•°ä¸ºï¼š{0}&quot;.format(l_score))</span>

    <span class="n">file_mode</span> <span class="o">=</span> <span class="s2">&quot;../../model/model-0x3/model.pkl&quot;</span>
    <span class="n">dump_model_object</span><span class="p">(</span><span class="n">file_mode</span><span class="p">)</span>
    <span class="n">file_vector</span> <span class="o">=</span> <span class="s2">&quot;../../model/model-0x3/vector.pl&quot;</span>
    <span class="n">dump_model_object</span><span class="p">(</span><span class="n">file_vector</span><span class="p">)</span>
</code></pre></div>
<p>æ­¤å¤–ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨æ”¯æŒå‘é‡æœºæ¨¡å‹ï¼š</p>
<div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">practice_svm</span><span class="p">(</span><span class="n">x_train</span><span class="p">,</span> <span class="n">x_test</span><span class="p">,</span> <span class="n">y_train</span><span class="p">,</span> <span class="n">y_test</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    å®è·µSVMç®—æ³•è¯†åˆ«æ¶æ„URL</span>
<span class="sd">    :param x_train:</span>
<span class="sd">    :param x_test:</span>
<span class="sd">    :param y_train:</span>
<span class="sd">    :param y_test:</span>
<span class="sd">    :return:</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">model_svm</span> <span class="o">=</span> <span class="n">SVC</span><span class="p">()</span>
    <span class="c1"># æ³¨æ„ï¼šSVMè®­ç»ƒå¯èƒ½è¾ƒæ…¢ï¼Œæ³¨æ„æ ·æœ¬çš„æ•°é‡</span>
    <span class="n">model_svm</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">x_train</span><span class="p">,</span> <span class="n">y_train</span><span class="p">)</span>
    <span class="n">svm_score</span> <span class="o">=</span> <span class="n">model_svm</span><span class="o">.</span><span class="n">score</span><span class="p">(</span><span class="n">x_test</span><span class="p">,</span> <span class="n">y_test</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;æµ‹è¯•æ‹Ÿåˆåˆ†æ•°ä¸ºï¼š</span><span class="si">{0}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">svm_score</span><span class="p">))</span>
    <span class="n">model_svm_save</span> <span class="o">=</span> <span class="n">model_svm</span>

    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    ä¿å­˜è®­ç»ƒå¥½çš„æ¨¡å‹å’Œå‘é‡</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">file_mode</span> <span class="o">=</span> <span class="s2">&quot;../../model/model-0x3/model_svm.pkl&quot;</span>
    <span class="n">dump_model_object</span><span class="p">(</span><span class="n">file_mode</span><span class="p">,</span> <span class="n">model_svm_save</span><span class="p">)</span>
</code></pre></div>
<h2 id="_9">æ•ˆæœè¯„ä¼°</h2>
<p>åœ¨â€œç‰¹å¾æå–â€éƒ¨åˆ†æˆ‘ä»¬é‡‡ç”¨<code>train_test_split</code>æ–¹æ³•è¿›è¡Œéšæœºåˆ’åˆ†è®­ç»ƒé›†å’Œæµ‹è¯•é›†ï¼Œè¿›è¡Œ<strong>äº¤å‰éªŒè¯</strong>ï¼Œå†æ¬¡å›é¡¾ä»£ç ä¸ºï¼š</p>
<div class="highlight"><pre><span></span><code><span class="n">x_train</span><span class="p">,</span> <span class="n">x_test</span><span class="p">,</span> <span class="n">y_train</span><span class="p">,</span> <span class="n">y_test</span> <span class="o">=</span> <span class="n">train_test_split</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">test_size</span><span class="o">=</span><span class="mf">0.2</span><span class="p">,</span> <span class="n">random_state</span><span class="o">=</span><span class="mi">42</span><span class="p">)</span>
</code></pre></div>
<p>ä½¿ç”¨çº¿æ€§å›å½’æ¨¡å‹ï¼Œæœ€åå¾—åˆ°æµ‹è¯•æ‹Ÿåˆåˆ†æ•°ä¸ºï¼š<strong>0.9599966703530615</strong></p>
<p>æ³¨ï¼Œå‚æ•°ä»‹ç»ï¼š</p>
<ul>
<li><code>test_size</code>ï¼šæµ‹è¯•é›†åœ¨æ€»æ ·æœ¬ä¸­çš„å æ¯”</li>
<li><code>random_state</code>ï¼šéšæœºæ•°çš„ç§å­ï¼Œä¹Ÿå¯ä»¥ç†è§£ä¸ºè¯¥ç»„éšæœºæ•°çš„ç¼–å·ã€‚è§„åˆ™æ˜¯ï¼šç§å­ä¸åŒæ—¶ï¼Œäº§ç”Ÿä¸åŒçš„éšæœºæ•°ï¼›ç§å­ç›¸åŒæ—¶ï¼Œåœ¨ä¸åŒå®ä¾‹ä¸‹ä¹Ÿäº§ç”Ÿç›¸åŒçš„éšæœºæ•°ã€‚æ¯”å¦‚åœ¨ä¸Šé¢çš„è¯­å¥ä¸­ï¼Œ<code>test_size</code>ä¸º0.2ï¼Œå³é€‰æ‹©æ€»æ ·æœ¬çš„20%ä½œä¸ºæµ‹è¯•é›†ï¼Œä½†æ˜¯å¦‚ä½•é€‰æ‹©å‘¢ï¼Ÿ<code>random_state</code>å°±æŒ‡å®šäº†ï¼šæŒ‰ç…§â€œç¬¬42ç§â€è§„åˆ™é€‰æ‹©è¿™20%éšæœºçš„æ•°æ®ã€‚</li>
</ul>
<p>ä½¿ç”¨æ”¯æŒå‘é‡æœºæ¨¡å‹æ—¶ï¼Œå‘ç°åœ¨æ•°æ®é‡è¾ƒå¤§çš„æƒ…å†µä¸‹ï¼Œè¯¥æ¨¡å‹çš„è¿ç®—é€Ÿåº¦è¾ƒæ…¢ï¼Œå› æ­¤åœ¨å®éªŒç¯å¢ƒä¸‹ä¸å¾—å·²å‡å°‘äº†è®­ç»ƒæ ·æœ¬çš„æ•°é‡ï¼Œä½†ä¹Ÿå¯¼è‡´äº†æ‹Ÿåˆåˆ†æ•°çš„é™ä½ï¼Œæ‰€ä»¥å°±ä¸å±•ç¤ºåœ¨æ ·æœ¬ç¼©æ°´æƒ…å†µä¸‹çš„æµ‹è¯•æ‹Ÿåˆåˆ†æ•°äº†ã€‚åŒæ—¶ï¼Œä¹Ÿäº†è§£åˆ°è¿™æ˜¯ä¼ ç»ŸäºŒåˆ†ç±»SVMåœ¨é¢å¯¹å¤§æ•°æ®é‡æ—¶çš„å¼Šç«¯ï¼Œå¹¶ä¸”éšç€é›†æˆå­¦ä¹ çš„æˆç†Ÿï¼ŒSVMç°åœ¨â€œæ™®éç”¨äºé›†æˆå­¦ä¹ ä¸­åŸºæ¨¡å‹çš„æ„å»ºâ€[2]ï¼Œè€Œä¸æ˜¯ä½œä¸ºå”¯ä¸€çš„åˆ†ç±»æ¨¡å‹ä½¿ç”¨ã€‚</p>
<h2 id="_10">å®Œæ•´ä»£ç </h2>
<div class="highlight"><pre><span></span><code><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">Author: Toky</span>
<span class="sd">Description: åŸºäºæœºå™¨å­¦ä¹ çš„æ¶æ„URLæ£€æµ‹</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="kn">import</span> <span class="nn">copy</span>
<span class="kn">import</span> <span class="nn">pickle</span>

<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">from</span> <span class="nn">sklearn.feature_extraction.text</span> <span class="kn">import</span> <span class="n">TfidfVectorizer</span>
<span class="kn">from</span> <span class="nn">sklearn.model_selection</span> <span class="kn">import</span> <span class="n">train_test_split</span>
<span class="kn">from</span> <span class="nn">sklearn.linear_model</span> <span class="kn">import</span> <span class="n">LogisticRegression</span>


<span class="k">def</span> <span class="nf">csv_data_read</span><span class="p">(</span><span class="n">csv_file_path</span><span class="p">):</span>
    <span class="c1"># ä¸ºå‡å°‘è®­ç»ƒæ—¶é—´ï¼Œå¯åªå–å¤´éƒ¨10Wæ¡ï¼Œä½†ä¸€å®šéœ€è¦å…ˆæ‰“ä¹±æ ·æœ¬ï¼‰</span>
    <span class="c1"># df_csv = pd.read_csv(csv_file_path).head(100000)</span>
    <span class="n">df_csv</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">csv_file_path</span><span class="p">)</span>
    <span class="n">urls</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">labels</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">df_csv</span><span class="o">.</span><span class="n">iterrows</span><span class="p">():</span>
        <span class="n">urls</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="s2">&quot;url&quot;</span><span class="p">])</span>
        <span class="n">labels</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="s2">&quot;label&quot;</span><span class="p">])</span>
    <span class="k">return</span> <span class="n">urls</span><span class="p">,</span> <span class="n">labels</span>


<span class="k">def</span> <span class="nf">url_tokenize</span><span class="p">(</span><span class="n">url</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    å¯¹URLè¿›è¡Œæ¸…æ´—ï¼Œåˆ é™¤æ–œçº¿ã€ç‚¹ã€å’Œcomï¼Œè¿›è¡Œåˆ†è¯</span>
<span class="sd">    :param url:</span>
<span class="sd">    :return:</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">web_url</span> <span class="o">=</span> <span class="n">url</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
    <span class="n">dot_slash</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">slash</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">web_url</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">slash</span><span class="p">:</span>
        <span class="n">r1</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">)</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;-&#39;</span><span class="p">)</span>
        <span class="n">token_slash</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="nb">len</span><span class="p">(</span><span class="n">r1</span><span class="p">)):</span>
            <span class="n">r2</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">r1</span><span class="p">[</span><span class="n">j</span><span class="p">])</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;.&#39;</span><span class="p">)</span>
            <span class="n">token_slash</span> <span class="o">=</span> <span class="n">token_slash</span> <span class="o">+</span> <span class="n">r2</span>
        <span class="n">dot_slash</span> <span class="o">=</span> <span class="n">dot_slash</span> <span class="o">+</span> <span class="n">r1</span> <span class="o">+</span> <span class="n">token_slash</span>
    <span class="n">urltoken_list</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">dot_slash</span><span class="p">))</span>
    <span class="n">white_words</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;com&quot;</span><span class="p">,</span> <span class="s2">&quot;http:&quot;</span><span class="p">,</span> <span class="s2">&quot;https:&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">]</span>
    <span class="k">for</span> <span class="n">white_word</span> <span class="ow">in</span> <span class="n">white_words</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">white_word</span> <span class="ow">in</span> <span class="n">urltoken_list</span><span class="p">:</span>
            <span class="n">urltoken_list</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">white_word</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">urltoken_list</span>


<span class="k">def</span> <span class="nf">dump_model_object</span><span class="p">(</span><span class="n">file_path</span><span class="p">,</span> <span class="n">model_object</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    ä½¿ç”¨pickleå°†å†…å­˜ä¸­çš„å¯¹è±¡è½¬æ¢ä¸ºæ–‡æœ¬æµä¿å­˜ä¸ºæœ¬åœ°æ–‡ä»¶</span>
<span class="sd">    :param file_path:</span>
<span class="sd">    :return:</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">file_path</span><span class="p">,</span> <span class="s2">&quot;wb&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="n">pickle</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">model_object</span><span class="p">,</span> <span class="n">f</span><span class="p">)</span>
    <span class="n">f</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    åŠ è½½æ•°æ®é›†</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">grep_csv_file_path</span> <span class="o">=</span> <span class="s2">&quot;../../data/data-0x3/grey-url.csv&quot;</span>
    <span class="n">black_csv_file_path</span> <span class="o">=</span> <span class="s2">&quot;../../data/data-0x3/black-url.csv&quot;</span>
    <span class="n">grey_urls</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="n">csv_data_read</span><span class="p">(</span><span class="n">grep_csv_file_path</span><span class="p">)</span>

    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    ä½¿ç”¨TF-IDFç®—æ³•æå–å…³é”®è¯ç‰¹å¾ï¼Œå¹¶å°†æ•°æ®å¸§åˆ’åˆ†ä¸ºè®­ç»ƒé›†å’Œæµ‹è¯•é›†</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">url_vectorizer</span> <span class="o">=</span> <span class="n">TfidfVectorizer</span><span class="p">(</span><span class="n">tokenizer</span><span class="o">=</span><span class="n">url_tokenize</span><span class="p">)</span>
    <span class="n">url_vectorizer_save</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">url_vectorizer</span><span class="p">)</span>
    <span class="n">x</span> <span class="o">=</span> <span class="n">url_vectorizer</span><span class="o">.</span><span class="n">fit_transform</span><span class="p">(</span><span class="n">grey_urls</span><span class="p">)</span>
    <span class="n">x_train</span><span class="p">,</span> <span class="n">x_test</span><span class="p">,</span> <span class="n">y_train</span><span class="p">,</span> <span class="n">y_test</span> <span class="o">=</span> <span class="n">train_test_split</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">test_size</span><span class="o">=</span><span class="mf">0.2</span><span class="p">,</span> <span class="n">random_state</span><span class="o">=</span><span class="mi">42</span><span class="p">)</span>

    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    å¯¹æ•°æ®å¸§æ‰§è¡Œé€»è¾‘å›å½’ï¼Œå°†æ‹Ÿåˆåçš„æ¨¡å‹å’Œå‘é‡ä¿å­˜</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># å¯¹è®­ç»ƒé›†å’Œæµ‹è¯•é›†æ‰§è¡Œé€»è¾‘å›å½’</span>
    <span class="n">l_regress</span> <span class="o">=</span> <span class="n">LogisticRegression</span><span class="p">(</span><span class="n">solver</span><span class="o">=</span><span class="s1">&#39;liblinear&#39;</span><span class="p">)</span>
    <span class="n">l_regress</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">x_train</span><span class="p">,</span> <span class="n">y_train</span><span class="p">)</span>
    <span class="n">l_score</span> <span class="o">=</span> <span class="n">l_regress</span><span class="o">.</span><span class="n">score</span><span class="p">(</span><span class="n">x_test</span><span class="p">,</span> <span class="n">y_test</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;æµ‹è¯•æ‹Ÿåˆåˆ†æ•°ä¸ºï¼š</span><span class="si">{0}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">l_score</span><span class="p">))</span>

    <span class="n">file_mode</span> <span class="o">=</span> <span class="s2">&quot;../../model/model-0x3/model.pkl&quot;</span>
    <span class="n">dump_model_object</span><span class="p">(</span><span class="n">file_mode</span><span class="p">,</span> <span class="n">l_regress</span><span class="p">)</span>
    <span class="n">file_vector</span> <span class="o">=</span> <span class="s2">&quot;../../model/model-0x3/vector.pl&quot;</span>
    <span class="n">dump_model_object</span><span class="p">(</span><span class="n">file_vector</span><span class="p">,</span> <span class="n">url_vectorizer_save</span><span class="p">)</span>
</code></pre></div>
<h2 id="_11">æ¦‚å¿µè¡¥å……</h2>
<h3 id="_12">é€»è¾‘å›å½’</h3>
<p>é€»è¾‘å›å½’æ¨¡å‹é€šè¿‡é€»è¾‘å‡½æ•°å¯¹æ•°æ®è¿›è¡Œ<strong>åˆ†ç±»</strong>ï¼Œé€šå¸¸åŒ…æ‹¬ç”¨äºä¼°è®¡é€»è¾‘æ¨¡å‹ç»“æœçš„ç‹¬ç«‹äºŒå…ƒå˜é‡ã€‚ç›¸æ¯”äºçº¿æ€§å›å½’ï¼Œé€»è¾‘å›å½’å¤„ç†çš„åˆ†ç±»é—®é¢˜ï¼Œè¾“å‡ºçš„ç»“æœä¸ºç¦»æ•£å€¼ï¼›è€Œçº¿æ€§å›å½’è§£å†³çš„æ˜¯å›å½’é—®é¢˜è¾“å‡ºçš„æ˜¯è¿ç»­å€¼ã€‚</p>
<p>è¯¦ç»†è§£è¯»å¯ä»¥å‚è€ƒæ–‡ç« [1]ï¼Œæ³¨æ„ï¼Œè™½ç„¶è¯¥ç®—æ³•åœ¨ç”¨èµ·æ¥æ—¶æ˜¾å¾—éå¸¸ç®€å•ï¼Œä½†æ˜¯å…¶åŸç†ä¸­çš„ç»†èŠ‚éƒ¨åˆ†è¿˜æ˜¯å¾ˆå¤šçš„ï¼Œæ„Ÿå…´è¶£å¯ä»¥ä»”ç»†ç ”ç©¶ä¸€ä¸‹ã€‚</p>
<h3 id="svm">æ”¯æŒå‘é‡æœºï¼ˆSVMï¼‰</h3>
<p>æ”¯æŒå‘é‡æœºï¼ˆSurport Vector Machine, SVMï¼‰åŒæ ·ç”¨äºåˆ†ç±»ï¼Œæ˜¯ä¸€ä¸ªäºŒå…ƒåˆ†ç±»ç®—æ³•ï¼Œä½†ä¿®æ”¹åä¹Ÿæ”¯æŒå¤šåˆ†ç±»é—®é¢˜ã€‚æ”¯æŒå‘é‡æœºé€šè¿‡åœ¨é«˜ç»´ç©ºé—´ä¸­åˆ›å»ºæœ€ä½³è¶…å¹³é¢æ¥å®ç°ï¼Œè¿™ä¸ªè¶…å¹³é¢åˆ›å»ºçš„åˆ’åˆ†è¢«ç§°ä¸ºç±»ã€‚</p>
<p>å¯¹äºåˆ†ç±»é—®é¢˜æœ¬è´¨çš„ç†è§£ï¼Œå°±æ˜¯æˆ‘ä»¬éœ€è¦æ‰¾åˆ°ä¸€ä¸ªåˆ’åˆ†çš„è¶…å¹³é¢ï¼Œè®©æ•°æ®å°½å¯èƒ½å¤šåœ°åˆ†å¸ƒåœ¨è¿™ä¸ªå¹³é¢çš„ä¸¤ä¾§ï¼Œä»è€Œå®ç°åˆ†ç±»çš„æ•ˆæœã€‚ä½†åœ¨å®é™…æ•°æ®ä¸‹ï¼Œå¾€å¾€å­˜åœ¨å¤šä¸ªè¶…å¹³é¢ï¼Œé‚£ä¹ˆæ­¤æ—¶æˆ‘ä»¬æ€ä¹ˆå–èˆå‘¢ï¼Ÿå°±æ˜¯æ¯”è¾ƒå®¹æ˜“åˆ†ç±»é”™è¯¯çš„æ•°æ®ç‚¹ï¼Œè€Œè¿™äº›ç‚¹å°±æ˜¯ç¦»å¹³é¢å¾ˆè¿‘çš„ç‚¹ï¼Œå› ä¸ºç¦»å¹³é¢å¾ˆè¿œçš„ç‚¹æ˜¯ç›¸å·®å¾ˆå¤§çš„ï¼ŒåŸºæœ¬ä¸ä¼šå­˜åœ¨åˆ†ç±»é”™è¯¯çš„æƒ…å†µã€‚è€ŒSVMçš„æ ¸å¿ƒæ€æƒ³å°±æ˜¯å¦‚æ­¤ï¼Œæ‰¾åˆ°ç¦»å¹³é¢å¾ˆè¿‘çš„ã€å®¹æ˜“åˆ†ç±»é”™è¯¯çš„ç‚¹ï¼Œç„¶åæƒ³åŠæ³•è®©è¿™äº›æ•°æ®ç‚¹ç¦»å¹³é¢è·ç¦»å˜è¿œã€‚é‚£äº›ç¦»è¶…å¹³é¢å¾ˆè¿‘çš„ç‚¹ä¹Ÿå°±è¢«ç§°ä¸ºæ”¯æŒå‘é‡ï¼ˆSupport Vectorï¼‰ã€‚</p>
<p>è¯¦ç»†çš„æ•°å­¦åŸç†ï¼Œå¯ä»¥å‚è€ƒæ–‡ç« [2]ï¼Œè¯¥ç®—æ³•æœ‰æ¯”è¾ƒå®Œå¤‡çš„æ•°å­¦ç†è®ºæ”¯æ’‘çš„ï¼Œä½†è¯¦ç»†çš„æ•°ç†å’Œæ¨å€’ä¹Ÿç›¸å¯¹æ¯”è¾ƒå¤æ‚ï¼Œå› æ­¤ä¹Ÿå¯ä»¥çœ‹è‡ªå·±éœ€è¦è¿›è¡Œå­¦ä¹ ï¼ˆ~~å…¶å®å°±æ˜¯æˆ‘çœ‹ä¸æ‡‚ï¼Œä¸çŒ®ä¸‘æ¥æ¨å¯¼äº†~~ï¼‰ã€‚</p>
<h2 id="reference">Reference</h2>
<p>[1]ã€æœºå™¨å­¦ä¹ ã€‘é€»è¾‘å›å½’ï¼ˆéå¸¸è¯¦ç»†ï¼‰ï¼Œ<a href="https://www.zhihu.com/people/is-aze">é˜¿æ³½</a>ï¼Œhttps://zhuanlan.zhihu.com/p/74874291</p>
<p>[2] 05 SVM - æ”¯æŒå‘é‡æœº - æ¦‚å¿µã€çº¿æ€§å¯åˆ†ï¼Œ<a href="https://www.jianshu.com/u/a9f6de37f77b">ç™½å°”æ‘©æ–¯</a>ï¼Œhttps://www.jianshu.com/p/410a56129757</p>

              
            </article>
          </div>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="é¡µè„š">
      
        
        <a href="../0x2_%E5%9F%BA%E4%BA%8E%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0%E7%9A%84DGA%E6%A3%80%E6%B5%8B/" class="md-footer__link md-footer__link--prev" aria-label="ä¸Šä¸€é¡µ: åŸºäºæ·±åº¦å­¦ä¹ çš„DGAæ£€æµ‹" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                ä¸Šä¸€é¡µ
              </span>
              åŸºäºæ·±åº¦å­¦ä¹ çš„DGAæ£€æµ‹
            </div>
          </div>
        </a>
      
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "..", "features": [], "translations": {"clipboard.copy": "\u590d\u5236", "clipboard.copied": "\u5df2\u590d\u5236", "search.config.lang": "ja", "search.config.pipeline": "trimmer, stemmer", "search.config.separator": "[\\uff0c\\u3002]+", "search.placeholder": "\u641c\u7d22", "search.result.placeholder": "\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22", "search.result.none": "\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.one": "\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.other": "# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.one": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.other": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 # \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.term.missing": "\u7f3a\u5c11", "select.version.title": "\u9009\u62e9\u5f53\u524d\u7248\u672c"}, "search": "../assets/javascripts/workers/search.22074ed6.min.js"}</script>
    
    
      <script src="../assets/javascripts/bundle.01de222e.min.js"></script>
      
    
  </body>
</html>